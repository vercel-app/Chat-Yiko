<!DOCTYPE html>

<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>APP-Chat Yiko</title>
</head>
<body>
  <h1>
   
  </h1>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalChat | online.store</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
  <style>
  :root {
    /* Paleta de cores escuras com azul */
    --primary-dark: #121212;
    --secondary-dark: #1a1a1a;
    --accent-blue: #0066ff;
    --accent-blue-dark: #0044cc;
    --text-primary: #ffffff;
    --text-secondary: #b3b3b3;
    --online-status: #00cc44;
    --offline-status: #ff3333;
    --border-color: #2a2a2a;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background-color: var(--primary-dark);
    color: var(--text-primary);
    min-height: 100vh;
}

.hidden {
    display: none !important;
}

/* Estilos de autenticação */
.auth-page {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(135deg, var(--primary-dark), var(--accent-blue-dark));
}

.auth-container {
    background-color: var(--secondary-dark);
    border-radius: 12px;
    padding: 40px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    width: 400px;
    animation: fadeIn 0.5s ease;
}

.logo-container {
    text-align: center;
    margin-bottom: 30px;
}

.logo-container img {
    width: 80px;
    height: 80px;
    margin-bottom: 10px;
}

.logo-container h1 {
    color: var(--accent-blue);
    font-size: 28px;
}

.auth-form-container h2 {
    font-size: 22px;
    margin-bottom: 20px;
    text-align: center;
}

.input-group {
    margin-bottom: 18px;
}

.input-group input {
    width: 100%;
    padding: 14px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
    transition: all 0.3s;
}

.input-group input:focus {
    outline: none;
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 2px rgba(0, 102, 255, 0.3);
}

.btn-primary {
    width: 100%;
    padding: 14px;
    background-color: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
}

.btn-primary:hover {
    background-color: var(--accent-blue-dark);
}

.auth-switch {
    margin-top: 20px;
    text-align: center;
    font-size: 14px;
    color: var(--text-secondary);
}

.auth-switch a {
    color: var(--accent-blue);
    text-decoration: none;
    font-weight: bold;
}

.auth-switch a:hover {
    text-decoration: underline;
}

/* Animações */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Interface principal do chat */
.main-container {
    display: flex;
    height: 100vh;
}

.sidebar {
    width: 320px;
    background-color: var(--secondary-dark);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.user-profile {
    padding: 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}

.user-profile:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.profile-pic {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 15px;
}

.large-profile-pic {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 15px;
}

.user-info {
    flex-grow: 1;
}

.user-info h3 {
    font-size: 18px;
    margin-bottom: 5px;
}

.user-info span {
    font-size: 14px;
    color: var(--text-secondary);
}

.user-actions {
    display: flex;
    align-items: center;
}

.icon-button {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    transition: color 0.2s;
}

.icon-button:hover {
    color: var(--accent-blue);
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-left: 10px;
}

.status-online {
    background-color: var(--online-status);
}

.status-offline {
    background-color: var(--offline-status);
}

.verified-badge {
    color: var(--accent-blue);
    margin-left: 5px;
    font-size: 14px;
}

/* Estilos da barra lateral */
.sidebar-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
}

.tab {
    flex-grow: 1;
    padding: 15px 0;
    text-align: center;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
}

.tab i {
    margin-right: 5px;
}

.tab:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.tab.active {
    color: var(--accent-blue);
    border-bottom: 2px solid var(--accent-blue);
}

/* Estilos para contatos e conversas */
.contacts-list {
    flex-grow: 1;
    overflow-y: auto;
}

.contact-item {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}

.contact-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.contact-item.active {
    background-color: rgba(0, 102, 255, 0.1);
    border-left: 3px solid var(--accent-blue);
}

.contact-info {
    flex-grow: 1;
    margin-left: 15px;
    overflow: hidden;
}

.contact-header {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    justify-content: space-between;
}

.contact-header h4 {
    font-size: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
}

.message-time {
    font-size: 12px;
    color: var(--text-secondary);
}

.last-message {
    font-size: 13px;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

/* Item de usuário na lista de exploração */
.user-item {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.user-info {
    flex-grow: 1;
    margin-left: 15px;
}

.user-header {
    display: flex;
    align-items: center;
    margin-bottom: 3px;
}

.user-header h4 {
    font-size: 16px;
    margin-right: 5px;
}

.username {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 5px;
}

.followers {
    font-size: 12px;
    color: var(--text-secondary);
}

.follow-btn {
    padding: 8px 12px;
    background-color: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.follow-btn:hover {
    background-color: var(--accent-blue-dark);
}

.follow-btn.following {
    background-color: var(--secondary-dark);
    border: 1px solid var(--accent-blue);
}

/* Barra de pesquisa */
.search-bar {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
    position: relative;
}

.search-bar input {
    width: 100%;
    padding: 10px 15px;
    padding-right: 40px;
    border-radius: 20px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 14px;
}

.search-bar input:focus {
    outline: none;
    background-color: rgba(255, 255, 255, 0.15);
}

.search-bar i {
    position: absolute;
    right: 25px;
    top: 25px;
    color: var(--text-secondary);
}

/* Estado vazio */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    color: var(--text-secondary);
    text-align: center;
}

.empty-state i {
    font-size: 40px;
    margin-bottom: 15px;
    opacity: 0.7;
}

/* Área de chat principal */
.chat-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.chat-header {
    padding: 15px 20px;
    background-color: var(--secondary-dark);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.contact-info .status {
    display: flex;
    align-items: center;
    font-size: 13px;
    color: var(--text-secondary);
}

.contact-info .status-indicator {
    margin-right: 5px;
    margin-left: 0;
    width: 8px;
    height: 8px;
}

.messages-container {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    background-color: var(--primary-dark);
    display: flex;
    flex-direction: column;
}

/* Mensagem de boas-vindas */
.welcome-message {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    color: var(--text-secondary);
    padding: 20px;
}

.welcome-message i {
    font-size: 50px;
    margin-bottom: 20px;
    color: var(--accent-blue);
}

.welcome-message h2 {
    margin-bottom: 10px;
    color: var(--text-primary);
}

.message {
    max-width: 70%;
    padding: 12px 15px;
    border-radius: 18px;
    margin-bottom: 10px;
    word-wrap: break-word;
}

.message-sent {
    background-color: var(--accent-blue);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 4px;
}

.message-received {
    background-color: var(--secondary-dark);
    color: var(--text-primary);
    align-self: flex-start;
    border-bottom-left-radius: 4px;
}

.message-time {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
    margin-top: 5px;
    text-align: right;
}

.chat-input {
    padding: 15px;
    background-color: var(--secondary-dark);
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.chat-input input {
    flex-grow: 1;
    padding: 12px 15px;
    padding-right: 40px;
    border-radius: 20px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
}

.chat-input input:focus {
    outline: none;
    background-color: rgba(255, 255, 255, 0.15);
}

.send-button {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background-color: var(--accent-blue);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 10px;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s;
}

.send-button:hover {
    background-color: var(--accent-blue-dark);
}

.send-button:disabled {
    background-color: var(--border-color);
    cursor: not-allowed;
}

/* Painel de perfil */
.profile-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 380px;
    height: 100vh;
    background-color: var(--secondary-dark);
    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    overflow-y: auto;
    transition: transform 0.3s ease;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { transform: translateX(380px); }
    to { transform: translateX(0); }
}

.profile-header {
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border-color);
}

.profile-header h2 {
    font-size: 20px;
}

.close-panel, .edit-profile {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    transition: color 0.2s;
}

.close-panel:hover, .edit-profile:hover {
    color: var(--accent-blue);
}

.profile-content {
    padding: 20px;
}

.profile-image-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto 20px;
}

.upload-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 35px;
    height: 35px;
    background-color: var(--accent-blue);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    cursor: pointer;
    transition: background-color 0.2s;
}

.upload-overlay:hover {
    background-color: var(--accent-blue-dark);
}

.profile-details {
    text-align: center;
    margin-bottom: 25px;
}

.profile-details h2 {
    font-size: 22px;
    margin-bottom: 5px;
}

.profile-details p {
    font-size: 16px;
    color: var(--text-secondary);
    margin-bottom: 15px;
}

.verification-status {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.profile-verified-badge {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 16px;
}

.btn-secondary {
    padding: 8px 15px;
    background-color: transparent;
    color: var(--accent-blue);
    border: 1px solid var(--accent-blue);
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-secondary:hover {
    background-color: rgba(0, 102, 255, 0.1);
}

.profile-stats {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 25px;
    padding: 15px 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}

.stat {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stat-count {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 14px;
    color: var(--text-secondary);
}

.profile-bio, .profile-categories {
    margin-bottom: 25px;
}

.profile-bio h3, .profile-categories h3 {
    font-size: 18px;
    margin-bottom: 10px;
    color: var(--text-primary);
}

.profile-bio p {
    color: var(--text-secondary);
    margin-bottom: 15px;
    line-height: 1.5;
}

.btn-outline {
    padding: 8px 15px;
    background-color: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-outline:hover {
    border-color: var(--text-primary);
    color: var(--text-primary);
}

.categories-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}

.category-tag {
    padding: 5px 12px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    font-size: 14px;
    color: var(--text-secondary);
}

/* Modal de verificação */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background-color: var(--secondary-dark);
    border-radius: 12px;
    width: 500px;
    max-width: 90%;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    animation: scaleIn 0.3s ease;
}

@keyframes scaleIn {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.modal-header {
    padding: 20px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    font-size: 20px;
}

.close-modal {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    transition: color 0.2s;
}

.close-modal:hover {
    color: var(--accent-blue);
}

.modal-body {
    padding: 20px;
}

.modal-body p {
    margin-bottom: 20px;
    line-height: 1.5;
    color: var(--text-secondary);
}

.modal-body .input-group {
    margin-bottom: 15px;
}

.modal-body .input-group label {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
    color: var(--text-primary);
}

.modal-body textarea {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
    resize: vertical;
}

.modal-body textarea:focus {
    outline: none;
    border-color: var(--accent-blue);
}

.verification-note {
    font-size: 13px;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 15px;
}

/* Responsividade */
@media (max-width: 768px) {
    .main-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: 60vh;
    }
    
    .chat-area {
        height: 40vh;
    }
    
    .profile-panel {
        width: 100%;
    }
}

/* Estilos para scrollbar personalizada */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--primary-dark);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
}
   :root {
    /* Paleta de cores escuras com azul */
    --primary-dark: #121212;
    --secondary-dark: #1a1a1a;
    --accent-blue: #0066ff;
    --accent-blue-dark: #0044cc;
    --text-primary: #ffffff;
    --text-secondary: #b3b3b3;
    --online-status: #00cc44;
    --offline-status: #ff3333;
    --border-color: #2a2a2a;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background-color: var(--primary-dark);
    color: var(--text-primary);
    min-height: 100vh;
}

.hidden {
    display: none !important;
}

/* Estilos de autenticação */
.auth-page {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(135deg, var(--primary-dark), var(--accent-blue-dark));
}

.auth-container {
    background-color: var(--secondary-dark);
    border-radius: 12px;
    padding: 40px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    width: 400px;
    animation: fadeIn 0.5s ease;
}

.logo-container {
    text-align: center;
    margin-bottom: 30px;
}

.logo-container img {
    width: 80px;
    height: 80px;
    margin-bottom: 10px;
}

.logo-container h1 {
    color: var(--accent-blue);
    font-size: 28px;
}

.auth-form-container h2 {
    font-size: 22px;
    margin-bottom: 20px;
    text-align: center;
}

.input-group {
    margin-bottom: 18px;
}

.input-group input {
    width: 100%;
    padding: 14px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
    transition: all 0.3s;
}

.input-group input:focus {
    outline: none;
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 2px rgba(0, 102, 255, 0.3);
}

.btn-primary {
    width: 100%;
    padding: 14px;
    background-color: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
}

.btn-primary:hover {
    background-color: var(--accent-blue-dark);
}

.auth-switch {
    margin-top: 20px;
    text-align: center;
    font-size: 14px;
    color: var(--text-secondary);
}

.auth-switch a {
    color: var(--accent-blue);
    text-decoration: none;
    font-weight: bold;
}

.auth-switch a:hover {
    text-decoration: underline;
}

/* Animações */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Interface principal do chat */
.main-container {
    display: flex;
    height: 100vh;
}

.sidebar {
    width: 320px;
    background-color: var(--secondary-dark);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.user-profile {
    padding: 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.profile-pic {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 15px;
}

.user-info h3 {
    font-size: 18px;
    margin-bottom: 5px;
}

.user-info span {
    font-size: 14px;
    color: var(--text-secondary);
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-left: auto;
}

.status-online {
    background-color: var(--online-status);
}

.status-offline {
    background-color: var(--offline-status);
}

.verified-badge {
    color: var(--accent-blue);
    margin-left: 5px;
    font-size: 14px;
}

/* Estilos para contatos e conversas */
.contacts-list {
    flex-grow: 1;
    overflow-y: auto;
}

.contact-item {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}

.contact-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.contact-item.active {
    background-color: rgba(0, 102, 255, 0.1);
    border-left: 3px solid var(--accent-blue);
}

/* Área de chat principal */
.chat-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.chat-header {
    padding: 15px 20px;
    background-color: var(--secondary-dark);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.messages-container {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    background-color: var(--primary-dark);
    display: flex;
    flex-direction: column;
}

.message {
    max-width: 70%;
    padding: 12px 15px;
    border-radius: 18px;
    margin-bottom: 10px;
    word-wrap: break-word;
}

.message-sent {
    background-color: var(--accent-blue);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 4px;
}

.message-received {
    background-color: var(--secondary-dark);
    color: var(--text-primary);
    align-self: flex-start;
    border-bottom-left-radius: 4px;
}

.message-time {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
    margin-top: 5px;
    text-align: right;
}

.chat-input {
    padding: 15px;
    background-color: var(--secondary-dark);
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
}

.chat-input input {
    flex-grow: 1;
    padding: 12px 15px;
    border-radius: 20px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
}

.chat-input input:focus {
    outline: none;
}

.send-button {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background-color: var(--accent-blue);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 10px;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s;
}

.send-button:hover {
    background-color: var(--accent-blue-dark);
}
  /* Adicionar ao CSS existente */

/* Estilos da barra lateral */
.sidebar-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
}

.tab {
    flex-grow: 1;
    padding: 15px 0;
    text-align: center;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
}

.tab i {
    margin-right: 5px;
}

.tab:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

.tab.active {
    color: var(--accent-blue);
    border-bottom: 2px solid var(--accent-blue);
}

/* Item de usuário na lista de exploração */
.user-item {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.user-info {
    flex-grow: 1;
    margin-left: 15px;
}

.user-header {
    display: flex;
    align-items: center;
    margin-bottom: 3px;
}

.user-header h4 {
    font-size: 16px;
    margin-right: 5px;
}

.username {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 5px;
}

.followers {
    font-size: 12px;
    color: var(--text-secondary);
}

.follow-btn {
    padding: 8px 12px;
    background-color: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.follow-btn:hover {
    background-color: var(--accent-blue-dark);
}

.follow-btn.following {
    background-color: var(--secondary-dark);
    border: 1px solid var(--accent-blue);
}

/* Barra de pesquisa */
.search-bar {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
    position: relative;
}

.search-bar input {
    width: 100%;
    padding: 10px 15px;
    padding-right: 40px;
    border-radius: 20px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 14px;
}

.search-bar input:focus {
    outline: none;
    background-color: rgba(255, 255, 255, 0.15);
}

.search-bar i {
    position: absolute;
    right: 25px;
    top: 25px;
    color: var(--text-secondary);
}

/* Estado vazio */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    color: var(--text-secondary);
    text-align: center;
}

.empty-state i {
    font-size: 40px;
    margin-bottom: 15px;
    opacity: 0.7;
}

/* Mensagem de boas-vindas */
.welcome-message {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    color: var(--text-secondary);
    padding: 20px;
}

.welcome-message i {
    font-size: 50px;
    margin-bottom: 20px;
    color: var(--accent-blue);
}

.welcome-message h2 {
    margin-bottom: 10px;
    color: var(--text-primary);
}

/* Painel de perfil */
.profile-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 380px;
    height: 100vh;
    background-color: var(--secondary-)
  /* Painel de perfil */
.profile-panel {
    position: fixed;
    top: 0;
    right: 0;
    width: 380px;
    height: 100vh;
    background-color: var(--secondary-dark);
    box-shadow: -5px 0 20px rgba(0, 0, 0, 0.5);
    z-index: 1000;
    transition: transform 0.3s ease;
    overflow-y: auto;
}

.profile-panel.hidden {
    transform: translateX(100%);
}

.profile-header {
    padding: 20px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    position: sticky;
    top: 0;
    background-color: var(--secondary-dark);
    z-index: 10;
}

.profile-header h2 {
    flex-grow: 1;
    text-align: center;
}

.close-panel, .edit-profile {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    transition: all 0.2s;
}

.close-panel:hover, .edit-profile:hover {
    color: var(--accent-blue);
    background-color: rgba(255, 255, 255, 0.1);
}

.profile-content {
    padding: 20px;
}

.profile-image-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto 20px;
}

.large-profile-pic {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

.upload-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 40px;
    height: 40px;
    background-color: var(--accent-blue);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    cursor: pointer;
    transition: background-color 0.2s;
}

.upload-overlay:hover {
    background-color: var(--accent-blue-dark);
}

.profile-details {
    text-align: center;
    margin-bottom: 30px;
}

.profile-details h2 {
    margin-bottom: 5px;
}

.profile-details p {
    color: var(--text-secondary);
    margin-bottom: 15px;
}

.verification-status {
    display: flex;
    justify-content: center;
    gap: 10px;
    align-items: center;
}

.profile-stats {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 30px;
}

.stat {
    text-align: center;
}

.stat-count {
    display: block;
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 5px;
}

.stat-label {
    color: var(--text-secondary);
    font-size: 14px;
}

.profile-bio, .profile-categories {
    margin-bottom: 30px;
}

.profile-bio h3, .profile-categories h3 {
    margin-bottom: 10px;
    font-size: 18px;
    color: var(--accent-blue);
}

.profile-bio p {
    color: var(--text-secondary);
    margin-bottom: 15px;
    line-height: 1.5;
}

.categories-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}

.category-tag {
    background-color: rgba(0, 102, 255, 0.15);
    color: var(--accent-blue);
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 14px;
}

.btn-outline {
    background: none;
    border: 1px solid var(--accent-blue);
    color: var(--accent-blue);
    padding: 8px 15px;
    border-radius: 5px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-outline:hover {
    background-color: rgba(0, 102, 255, 0.1);
}

.btn-secondary {
    background-color: var(--secondary-dark);
    border: 1px solid var(--accent-blue);
    color: var(--accent-blue);
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-secondary:hover {
    background-color: rgba(0, 102, 255, 0.1);
}

/* Modal de verificação */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

.modal.hidden {
    display: none;
}

.modal-content {
    background-color: var(--secondary-dark);
    width: 90%;
    max-width: 500px;
    border-radius: 10px;
    overflow: hidden;
    animation: fadeInUp 0.3s;
}

.modal-header {
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
}

.modal-header h2 {
    font-size: 20px;
}

.close-modal {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 18px;
    cursor: pointer;
}

.modal-body {
    padding: 20px;
}

.modal-body p {
    margin-bottom: 20px;
    line-height: 1.5;
}

.modal-body .input-group {
    margin-bottom: 20px;
}

.modal-body label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
}

.modal-body textarea {
    width: 100%;
    padding: 12px;
    border-radius: 5px;
    border: 1px solid var(--border-color);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-size: 16px;
    resize: vertical;
}

.verification-note {
    margin-top: 20px;
    font-size: 14px;
    color: var(--text-secondary);
}

.verification-note i {
    color: var(--accent-blue);
}

/* Animações adicionais */
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Estilizar mensagens de chat */
.message-content {
    word-break: break-word;
    line-height: 1.4;
}

.contact-header {
    display: flex;
    align-items: center;
    margin-bottom: 3px;
}

.contact-header h4 {
    margin-right: 5px;
}

.message-time {
    margin-left: auto;
    font-size: 12px;
    color: var(--text-secondary);
}

.last-message {
    font-size: 14px;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

/* Ajustes para dispositivos móveis */
@media (max-width: 768px) {
    .main-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: 70px;
        flex-direction: row;
        position: fixed;
        bottom: 0;
        z-index: 100;
    }
    
    .sidebar-tabs {
        width: 100%;
        border-bottom: none;
    }
    
    .user-profile {
        display: none;
    }
    
    .contacts-list {
        display: none;
    }
    
    .chat-area {
        margin-bottom: 70px;
    }
    
    .sidebar-content {
        position: fixed;
        bottom: 70px;
        left: 0;
        width: 100%;
        height: calc(100vh - 70px);
        background-color: var(--secondary-dark);
        z-index: 99;
    }
    
    .sidebar-content.hidden {
        display: none;
    }
    
    .profile-panel {
        width: 100%;
    }
}
  </style>
</head>
<body>
    <div class="main-container">
        <!-- Sidebar com perfil do usuário e contatos -->
        <div class="sidebar">
            <div class="user-profile">
                <img src="https://imgur.com/qmn2Gpt.png" alt="Perfil" id="user-avatar" class="profile-pic">
                <div class="user-info">
                    <h3 id="user-name">Carregando...</h3>
                    <span id="user-username">@carregando</span>
                    <span id="verified-badge" class="verified-badge hidden"><i class="fas fa-check-circle"></i></span>
                </div>
                <div class="user-actions">
                    <button id="logout-btn" class="icon-button">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>

            <!-- Abas para navegação na sidebar -->
            <div class="sidebar-tabs">
                <div class="tab active" data-tab="chats">
                    <i class="fas fa-comments"></i> Conversas
                </div>
                <div class="tab" data-tab="contacts">
                    <i class="fas fa-user-friends"></i> Contatos
                </div>
                <div class="tab" data-tab="explore">
                    <i class="fas fa-compass"></i> Explorar
                </div>
            </div>

            <!-- Lista de contatos/conversas -->
            <div class="contacts-list" id="chats-list">
                <!-- Os contatos serão carregados dinamicamente -->
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <p>Suas conversas aparecerão aqui</p>
                </div>
            </div>

            <!-- Lista de contatos -->
            <div class="contacts-list hidden" id="contacts-list">
                <!-- Os contatos serão carregados dinamicamente -->
                <div class="search-bar">
                    <input type="text" placeholder="Procurar contatos...">
                    <i class="fas fa-search"></i>
                </div>
            </div>

            <!-- Explorar usuários -->
            <div class="contacts-list hidden" id="explore-list">
                <div class="search-bar">
                    <input type="text" placeholder="Procurar usuários...">
                    <i class="fas fa-search"></i>
                </div>
                <!-- Usuários sugeridos serão carregados dinamicamente -->
            </div>
        </div>

        <!-- Área principal de chat -->
        <div class="chat-area">
            <!-- Header do chat mostrando informações do contato atual -->
            <div class="chat-header">
                <img src="https://imgur.com/qmn2Gpt.png" alt="Contato" id="contact-avatar" class="profile-pic">
                <div class="contact-info">
                    <h3 id="contact-name">Selecione um contato</h3>
                    <div class="status">
                        <span class="status-indicator" id="contact-status"></span>
                        <span id="status-text">Offline</span>
                    </div>
                </div>
            </div>

            <!-- Container para mensagens -->
            <div class="messages-container" id="messages-container">
                <div class="welcome-message">
                    <i class="fas fa-comments"></i>
                    <h2>Bem-vindo ao Chat Yiko</h2>
                    <p>Selecione uma conversa para começar a interagir.</p>
                </div>
            </div>

            <!-- Área de input para enviar mensagens -->
            <div class="chat-input">
                <input type="text" id="message-input" placeholder="Digite uma mensagem..." disabled>
                <button class="send-button" id="send-button" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <!-- Painel do perfil (exibido quando clicado) -->
        <div class="profile-panel hidden" id="profile-panel">
            <div class="profile-header">
                <button class="close-panel">
                    <i class="fas fa-times"></i>
                </button>
                <h2>Meu Perfil</h2>
                <button class="edit-profile">
                    <i class="fas fa-edit"></i>
                </button>
            </div>

            <div class="profile-content">
                <div class="profile-image-container">
                    <img src="images/default-avatar.png" alt="Perfil" id="profile-image" class="large-profile-pic">
                    <div class="upload-overlay">
                        <i class="fas fa-camera"></i>
                    </div>
                    <input type="file" id="profile-image-upload" accept="image/*" hidden>
                </div>

                <div class="profile-details">
                    <h2 id="profile-name">Nome do Usuário</h2>
                    <p id="profile-username">@username</p>
                    <div class="verification-status">
                        <span id="profile-verified-badge" class="verified-badge hidden"><i class="fas fa-check-circle"></i> Verificado</span>
                        <button id="request-verification" class="btn-secondary">Solicitar Verificação</button>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat">
                        <span class="stat-count" id="followers-count">0</span>
                        <span class="stat-label">Seguidores</span>
                    </div>
                    <div class="stat">
                        <span class="stat-count" id="following-count">0</span>
                        <span class="stat-label">Seguindo</span>
                    </div>
                </div>

                <div class="profile-bio">
                    <h3>Sobre mim</h3>
                    <p id="profile-bio">Adicione uma biografia para que as pessoas saibam mais sobre você.</p>
                    <button class="btn-outline" id="edit-bio">Editar Bio</button>
                </div>

                <div class="profile-categories">
                    <h3>Categorias</h3>
                    <div class="categories-list" id="categories-list">
                        <!-- Categorias serão carregadas dinamicamente -->
                        <span class="category-tag">Adicione categorias para o seu perfil</span>
                    </div>
                    <button class="btn-outline" id="add-category">Adicionar Categoria</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para solicitar verificação -->
    <div class="modal hidden" id="verification-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Solicitar Verificação</h2>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Para obter o selo de verificação, envie uma solicitação com sua foto e comprovante para o administrador.</p>
                <form id="verification-form">
                    <div class="input-group">
                        <label>Foto de Perfil</label>
                        <input type="file" id="verification-image" accept="image/*" required>
                    </div>
                    <div class="input-group">
                        <label>Mensagem para o administrador</label>
                        <textarea id="verification-message" rows="4" placeholder="Por que você merece ser verificado?" required></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Enviar Solicitação</button>
                </form>
                <p class="verification-note">
                    <i class="fas fa-info-circle"></i> A solicitação será enviada para o WhatsApp do administrador (+244947541761) para revisão.
                </p>
            </div>
        </div>
    </div>

    <script>
  // Configuração do Firebase (mantendo a mesma que você forneceu)
const firebaseConfig = {
    apiKey: "AIzaSyBO_lkHCi7QIOcE1vbNEtx3gknsDfZHAps",
    authDomain: "banco-de-dadossy.firebaseapp.com",
    projectId: "banco-de-dadossy",
    storageBucket: "banco-de-dadossy.firebasestorage.app",
    messagingSenderId: "1972078944",
    appId: "1:1972078944:web:d5c938bb64f05448f87605",
    measurementId: "G-R5DQCJ1N66"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// Variáveis globais para armazenar informações do usuário e chat atual
let currentUser = null;
let currentChat = null;
let currentChatListener = null;
let userPresenceRef = null;

// Elementos DOM principais
const userAvatar = document.getElementById('user-avatar');
const userName = document.getElementById('user-name');
const userUsername = document.getElementById('user-username');
const verifiedBadge = document.getElementById('verified-badge');
const logoutBtn = document.getElementById('logout-btn');
const messageInput = document.getElementById('message-input');
const sendButton = document.getElementById('send-button');
const messagesContainer = document.getElementById('messages-container');
const chatsList = document.getElementById('chats-list');
const contactsList = document.getElementById('contacts-list');
const exploreList = document.getElementById('explore-list');
const profilePanel = document.getElementById('profile-panel');
const verificationModal = document.getElementById('verification-modal');

// Elementos para abas da sidebar
const tabs = document.querySelectorAll('.tab');
const tabContents = [
    document.getElementById('chats-list'),
    document.getElementById('contacts-list'),
    document.getElementById('explore-list')
];

// Verificar autenticação do usuário
auth.onAuthStateChanged(async (user) => {
    if (user) {
        currentUser = user;
        
        // Configurar presença online do usuário
        setupUserPresence(user.uid);
        
        // Carregar informações do usuário
        await loadUserProfile(user.uid);
        
        // Carregar chats, contatos e usuários para explorar
        loadChats();
        loadContacts();
        loadExploreUsers();
        
    } else {
        // Redirecionar para a página de login se não estiver autenticado
        window.location.href = 'index.html';
    }
});

// Configurar status de presença do usuário
function setupUserPresence(userId) {
    // Referência para o status online do usuário
    userPresenceRef = db.collection('users').doc(userId);
    
    // Definir usuário como online
    userPresenceRef.update({
        online: true,
        lastActive: firebase.firestore.FieldValue.serverTimestamp()
    });
    
    // Configurar para definir como offline quando desconectar
    db.collection('status').doc(userId).set({
        online: true,
        lastChanged: firebase.firestore.FieldValue.serverTimestamp()
    });
    
    // Configurar limpeza quando o usuário sair ou fechar a página
    window.addEventListener('beforeunload', () => {
        if (userPresenceRef) {
            userPresenceRef.update({
                online: false,
                lastActive: firebase.firestore.FieldValue.serverTimestamp()
            });
        }
    });
}

// Carregar perfil do usuário atual
async function loadUserProfile(userId) {
    try {
        const userDoc = await db.collection('users').doc(userId).get();
        
        if (userDoc.exists) {
            const userData = userDoc.data();
            
            // Atualizar informações na UI
            userName.textContent = userData.name;
            userUsername.textContent = '@' + userData.username;
            
            // Exibir selo de verificação se usuário for verificado
            if (userData.verified) {
                verifiedBadge.classList.remove('hidden');
            }
            
            // Carregar foto de perfil se existir
            if (userData.photoURL) {
                userAvatar.src = userData.photoURL;
            }
               // Também atualizar as informações no painel de perfil
            document.getElementById('profile-name').textContent = userData.name;
            document.getElementById('profile-username').textContent = '@' + userData.username;
            document.getElementById('profile-bio').textContent = userData.bio || 'Adicione uma biografia para que as pessoas saibam mais sobre você.';
            document.getElementById('followers-count').textContent = userData.followers || 0;
            document.getElementById('following-count').textContent = userData.following || 0;
            
            if (userData.verified) {
                document.getElementById('profile-verified-badge').classList.remove('hidden');
                document.getElementById('request-verification').classList.add('hidden');
            }
            
            // Carregar categorias do usuário
            if (userData.categories && userData.categories.length > 0) {
                const categoriesList = document.getElementById('categories-list');
                categoriesList.innerHTML = '';
                
                userData.categories.forEach(category => {
                    const categoryTag = document.createElement('span');
                    categoryTag.classList.add('category-tag');
                    categoryTag.textContent = category;
                    categoriesList.appendChild(categoryTag);
                });
            }
        }
    } catch (error) {
        console.error('Erro ao carregar perfil:', error);
    }
}

// Carregar lista de chats do usuário
async function loadChats() {
    try {
        // Limpar lista anterior
        chatsList.innerHTML = '';
        
        // Obter todas as conversas onde o usuário atual é participante
        const chatsSnapshot = await db.collection('chats')
            .where('participants', 'array-contains', currentUser.uid)
            .orderBy('lastMessageTime', 'desc')
            .get();
        
        if (chatsSnapshot.empty) {
            // Mostrar estado vazio se não houver conversas
            chatsList.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <p>Suas conversas aparecerão aqui</p>
                </div>
            `;
            return;
        }
        
        // Para cada chat, criar um item na lista
        for (const chatDoc of chatsSnapshot.docs) {
            const chatData = chatDoc.data();
            
            // Encontrar o outro participante (em chat de 2 pessoas)
            const otherParticipantId = chatData.participants.find(id => id !== currentUser.uid);
            
            // Obter informações do outro participante
            const otherUserDoc = await db.collection('users').doc(otherParticipantId).get();
            
            if (otherUserDoc.exists) {
                const otherUserData = otherUserDoc.data();
                
                // Criar elemento de contato na lista
                const contactItem = document.createElement('div');
                contactItem.classList.add('contact-item');
                contactItem.dataset.chatId = chatDoc.id;
                contactItem.dataset.userId = otherParticipantId;
                
                // Formatar última mensagem e horário
                let lastMessageText = chatData.lastMessage || 'Iniciar conversa';
                if (lastMessageText.length > 30) {
                    lastMessageText = lastMessageText.substring(0, 30) + '...';
                }
                
                let timeDisplay = '';
                if (chatData.lastMessageTime) {
                    const date = chatData.lastMessageTime.toDate();
                    timeDisplay = date.toLocaleDateString() === new Date().toLocaleDateString() 
                        ? date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                        : date.toLocaleDateString();
                }
                
                // Indicador de status online/offline
                const statusClass = otherUserData.online ? 'status-online' : 'status-offline';
                
                // Montar HTML do item de contato
                contactItem.innerHTML = `
                    <img src="${otherUserData.photoURL || 'images/default-avatar.png'}" alt="${otherUserData.name}" class="profile-pic">
                    <div class="contact-info">
                        <div class="contact-header">
                            <h4>${otherUserData.name}</h4>
                            ${otherUserData.verified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                            <span class="message-time">${timeDisplay}</span>
                        </div>
                        <p class="last-message">${lastMessageText}</p>
                    </div>
                    <div class="status-indicator ${statusClass}"></div>
                `;
                
                // Adicionar evento de clique para abrir o chat
                contactItem.addEventListener('click', () => {
                    openChat(chatDoc.id, otherParticipantId);
                    
                    // Remover classe ativa de todos os itens e adicionar ao atual
                    document.querySelectorAll('.contact-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    contactItem.classList.add('active');
                });
                
                // Adicionar à lista de chats
                chatsList.appendChild(contactItem);
            }
        }
    } catch (error) {
        console.error('Erro ao carregar chats:', error);
    }
}

// Carregar contatos
async function loadContacts() {
    try {
        // Limpar lista anterior
        contactsList.innerHTML = `
            <div class="search-bar">
                <input type="text" id="contacts-search" placeholder="Procurar contatos...">
                <i class="fas fa-search"></i>
            </div>
        `;
        
        // Obter todos os usuários (em uma aplicação real, você implementaria paginação)
        const usersSnapshot = await db.collection('users')
            .where(firebase.firestore.FieldPath.documentId(), '!=', currentUser.uid)
            .limit(50)
            .get();
        
        if (usersSnapshot.empty) {
            contactsList.innerHTML += `
                <div class="empty-state">
                    <i class="fas fa-user-friends"></i>
                    <p>Nenhum contato encontrado</p>
                </div>
            `;
            return;
        }
        
        // Para cada usuário, criar um item na lista
        usersSnapshot.forEach(userDoc => {
            const userData = userDoc.data();
            
            const contactItem = document.createElement('div');
            contactItem.classList.add('contact-item');
            contactItem.dataset.userId = userDoc.id;
            
            // Indicador de status online/offline
            const statusClass = userData.online ? 'status-online' : 'status-offline';
            
            contactItem.innerHTML = `
                <img src="${userData.photoURL || 'images/default-avatar.png'}" alt="${userData.name}" class="profile-pic">
                <div class="contact-info">
                    <div class="contact-header">
                        <h4>${userData.name}</h4>
                        ${userData.verified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                    </div>
                    <p class="username">@${userData.username}</p>
                </div>
                <div class="status-indicator ${statusClass}"></div>
            `;
            
            // Adicionar evento de clique para iniciar conversa
            contactItem.addEventListener('click', () => {
                startNewChat(userDoc.id);
            });
            
            // Adicionar à lista de contatos
            contactsList.appendChild(contactItem);
        });
        
        // Adicionar funcionalidade de pesquisa
        const searchInput = document.getElementById('contacts-search');
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            
            // Filtrar contatos baseado no termo de pesquisa
            document.querySelectorAll('#contacts-list .contact-item').forEach(item => {
                const name = item.querySelector('h4').textContent.toLowerCase();
                const username = item.querySelector('.username').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || username.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    } catch (error) {
        console.error('Erro ao carregar contatos:', error);
    }
}

// Carregar usuários para explorar
async function loadExploreUsers() {
    try {
        // Limpar lista anterior
        exploreList.innerHTML = `
            <div class="search-bar">
                <input type="text" id="explore-search" placeholder="Procurar usuários...">
                <i class="fas fa-search"></i>
            </div>
        `;
        
        // Obter usuários mais recentes e populares
        const usersSnapshot = await db.collection('users')
            .where(firebase.firestore.FieldPath.documentId(), '!=', currentUser.uid)
            .orderBy('followers', 'desc')
            .limit(20)
            .get();
        
        if (usersSnapshot.empty) {
            exploreList.innerHTML += `
                <div class="empty-state">
                    <i class="fas fa-compass"></i>
                    <p>Nenhum usuário encontrado</p>
                </div>
            `;
            return;
        }
        
        // Para cada usuário, criar um item na lista
        usersSnapshot.forEach(userDoc => {
            const userData = userDoc.data();
            
            const userItem = document.createElement('div');
            userItem.classList.add('user-item');
            userItem.dataset.userId = userDoc.id;
            
            userItem.innerHTML = `
                <img src="${userData.photoURL || 'images/default-avatar.png'}" alt="${userData.name}" class="profile-pic">
                <div class="user-info">
                    <div class="user-header">
                        <h4>${userData.name}</h4>
                        ${userData.verified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                    </div>
                    <p class="username">@${userData.username}</p>
                    <p class="followers">${userData.followers || 0} seguidores</p>
                </div>
                <button class="follow-btn" data-user-id="${userDoc.id}">
                    <i class="fas fa-user-plus"></i> Seguir
                </button>
            `;
            
            // Adicionar à lista de exploração
            exploreList.appendChild(userItem);
        });
        
        // Adicionar funcionalidade de pesquisa
        const searchInput = document.getElementById('explore-search');
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            
            // Filtrar usuários baseado no termo de pesquisa
            document.querySelectorAll('#explore-list .user-item').forEach(item => {
                const name = item.querySelector('h4').textContent.toLowerCase();
                const username = item.querySelector('.username').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || username.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });
        
        // Adicionar eventos para botões de seguir
        document.querySelectorAll('.follow-btn').forEach(btn => {
            btn.addEventListener('click', async (e) => {
                e.stopPropagation();
                const targetUserId = btn.dataset.userId;
                await followUser(targetUserId);
                
                // Atualizar UI
                btn.innerHTML = '<i class="fas fa-check"></i> Seguindo';
                btn.classList.add('following');
            });
        });
    } catch (error) {
        console.error('Erro ao carregar usuários para explorar:', error);
    }
}

// Seguir um usuário
async function followUser(targetUserId) {
    try {
        // Transação para atualizar contadores de seguidores e seguindo
        await db.runTransaction(async (transaction) => {
            const currentUserRef = db.collection('users').doc(currentUser.uid);
            const targetUserRef = db.collection('users').doc(targetUserId);
            
            // Criar relação de seguidor
            const followRef = db.collection('follows').doc(`${currentUser.uid}_${targetUserId}`);
            
            transaction.set(followRef, {
                follower: currentUser.uid,
                following: targetUserId,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            // Atualizar contador de "seguindo" do usuário atual
            const currentUserDoc = await transaction.get(currentUserRef);
            const currentUserData = currentUserDoc.data();
            transaction.update(currentUserRef, {
                following: (currentUserData.following || 0) + 1
            });
            
            // Atualizar contador de seguidores do usuário alvo
            const targetUserDoc = await transaction.get(targetUserRef);
            const targetUserData = targetUserDoc.data();
            transaction.update(targetUserRef, {
                followers: (targetUserData.followers || 0) + 1
            });
        });
        
        // Atualizar contador no painel de perfil
        const followingCount = document.getElementById('following-count');
        followingCount.textContent = parseInt(followingCount.textContent) + 1;
        
    } catch (error) {
        console.error('Erro ao seguir usuário:', error);
        alert('Não foi possível seguir este usuário. Tente novamente.');
    }
}

// Abrir um chat existente
async function openChat(chatId, otherUserId) {
    try {
        // Limpar chat anterior e configurar novo chat
        if (currentChatListener) {
            currentChatListener();
        }
        
        currentChat = chatId;
        messagesContainer.innerHTML = '';
        
        // Habilitar input de mensagem
        messageInput.disabled = false;
        sendButton.disabled = false;
        
        // Obter informações do outro usuário para o cabeçalho do chat
        const otherUserDoc = await db.collection('users').doc(otherUserId).get();
        const otherUserData = otherUserDoc.data();
        
        // Atualizar cabeçalho do chat
        document.getElementById('contact-avatar').src = otherUserData.photoURL || 'images/default-avatar.png';
        document.getElementById('contact-name').textContent = otherUserData.name;
        
        const statusIndicator = document.getElementById('contact-status');
        const statusText = document.getElementById('status-text');
        
        if (otherUserData.online) {
            statusIndicator.className = 'status-indicator status-online';
            statusText.textContent = 'Online';
        } else {
            statusIndicator.className = 'status-indicator status-offline';
            statusText.textContent = 'Offline';
        }
        
        // Configurar listener para mensagens em tempo real
        currentChatListener = db.collection('chats').doc(chatId)
            .collection('messages')
            .orderBy('timestamp')
            .onSnapshot(snapshot => {
                snapshot.docChanges().forEach(change => {
                    if (change.type === 'added') {
                        displayMessage(change.doc.data());
                    }
                });
                
                // Rolar para a última mensagem
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            });
    } catch (error) {
        console.error('Erro ao abrir chat:', error);
    }
}

// Iniciar um novo chat com um usuário
async function startNewChat(otherUserId) {
    try {
        // Verificar se já existe um chat com este usuário
        const chatQuery = await db.collection('chats')
            .where('participants', 'array-contains', currentUser.uid)
            .get();
        
        let existingChatId = null;
        
        chatQuery.forEach(doc => {
            const chatData = doc.data();
            if (chatData.participants.includes(otherUserId)) {
                existingChatId = doc.id;
            }
        });
        
        if (existingChatId) {
            // Se já existe chat, abri-lo
            openChat(existingChatId, otherUserId);
            
            // Mudar para a aba de chats
            selectTab('chats');
            
            // Destacar o chat na lista
            document.querySelectorAll('.contact-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.chatId === existingChatId) {
                    item.classList.add('active');
                }
            });
        } else {
            // Criar novo chat
            const newChatRef = db.collection('chats').doc();
            
            await newChatRef.set({
                participants: [currentUser.uid, otherUserId],
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                lastMessageTime: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            // Abrir o novo chat
            openChat(newChatRef.id, otherUserId);
            
            // Recarregar lista de chats
            loadChats();
            
            // Mudar para a aba de chats
            selectTab('chats');
        }
    } catch (error) {
        console.error('Erro ao iniciar chat:', error);
    }
}

// Exibir uma mensagem no container de chat
function displayMessage(messageData) {
    const isCurrentUser = messageData.senderId === currentUser.uid;
    const messageClass = isCurrentUser ? 'message-sent' : 'message-received';
    
    const messageElement = document.createElement('div');
    messageElement.classList.add('message', messageClass);
    
    // Formatar horário
    let timeDisplay = '';
    if (messageData.timestamp) {
        const date = messageData.timestamp.toDate();
        timeDisplay = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    
    messageElement.innerHTML = `
        <div class="message-content">${messageData.text}</div>
        <div class="message-time">${timeDisplay}</div>
    `;
    
    messagesContainer.appendChild(messageElement);
}

// Enviar mensagem
async function sendMessage() {
    const text = messageInput.value.trim();
    
    if (!text || !currentChat) return;
    
    try {
        const messageRef = db.collection('chats').doc(currentChat)
            .collection('messages').doc();
        
        const message = {
            id: messageRef.id,
            text: text,
            senderId: currentUser.uid,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };
        
        // Salvar mensagem
        await messageRef.set(message);
        
        // Atualizar último horário e mensagem do chat
        await db.collection('chats').doc(currentChat).update({
            lastMessage: text,
            lastMessageTime: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        // Limpar input
        messageInput.value = '';
        
    } catch (error) {
        console.error('Erro ao enviar mensagem:', error);
    }
}

// Função para alternar entre abas da sidebar
function selectTab(tabName) {
    // Remover classe active de todas as abas
    tabs.forEach(tab => {
        tab.classList.remove('active');
    });
    
    // Esconder todos os conteúdos
    tabContents.forEach(content => {
        content.classList.add('hidden');
    });
    
    // Ativar a aba selecionada
    document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
    
    // Mostrar o conteúdo correspondente
    switch(tabName) {
        case 'chats':
            document.getElementById('chats-list').classList.remove('hidden');
            break;
        case 'contacts':
            document.getElementById('contacts-list').classList.remove('hidden');
            break;
        case 'explore':
            document.getElementById('explore-list').classList.remove('hidden');
            break;
    }
}

// Configurar eventos para abas
tabs.forEach(tab => {
    tab.addEventListener('click', () => {
        selectTab(tab.dataset.tab);
    });
});

// Configurar evento para botão de enviar mensagem
sendButton.addEventListener('click', sendMessage);

// Permitir envio de mensagem com Enter
messageInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
});

// Configurar logout
logoutBtn.addEventListener('click', async () => {
    try {
        // Atualizar status para offline
        if (userPresenceRef) {
            await userPresenceRef.update({
                online: false,
                lastActive: firebase.firestore.FieldValue.serverTimestamp()
            });
        }
        
        // Fazer logout
        await auth.signOut();
        
        // Redirecionar para página de login
        window.location.href = 'index.html';
    } catch (error) {
        console.error('Erro ao fazer logout:', error);
    }
});

// Exibir painel de perfil
document.querySelector('.user-profile').addEventListener('click', () => {
    profilePanel.classList.toggle('hidden');
});

// Fechar painel de perfil
document.querySelector('.close-panel').addEventListener('click', () => {
    profilePanel.classList.add('hidden');
});

// Verificação de usuário
document.getElementById('request-verification').addEventListener('click', () => {
    verificationModal.classList.remove('hidden');
});

// Fechar modal de verificação
document.querySelector('.close-modal').addEventListener('click', () => {
    verificationModal.classList.add('hidden');
});

// Formulário de solicitação de verificação
document.getElementById('verification-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const verificationImage = document.getElementById('verification-image').files[0];
    const verificationMessage = document.getElementById('verification-message').value;
    
    if (!verificationImage || !verificationMessage) {
        alert('Por favor, preencha todos os campos.');
        return;
    }
    
    try {
        // Upload da imagem para o Storage
        const storageRef = storage.ref(`verification_requests/${currentUser.uid}_${Date.now()}`);
        await storageRef.put(verificationImage);
        const imageUrl = await storageRef.getDownloadURL();
        
        // Salvar solicitação no Firestore
        await db.collection('verification_requests').add({
            userId: currentUser.uid,
            userName: document.getElementById('profile-name').textContent,
            userUsername: document.getElementById('profile-username').textContent.substring(1),
            message: verificationMessage,
            imageUrl: imageUrl,
            status: 'pending',
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        // Aqui você implementaria o código para enviar para o WhatsApp do administrador
        // Como isso requer integração com API externa (WhatsApp API), vamos apenas simular
        
        alert('Solicitação enviada com sucesso! O administrador irá revisar em breve.');
        verificationModal.classList.add('hidden');
        
    } catch (error) {
        console.error('Erro ao enviar solicitação de verificação:', error);
        alert('Erro ao enviar solicitação. Tente novamente.');
    }
});

// Upload de imagem de perfil
document.querySelector('.upload-overlay').addEventListener('click', () => {
    document.getElementById('profile-image-upload').click();
});

document.getElementById('profile-image-upload').addEventListener('change', async (e) => {
    const file = e.target.files[0];
    
    if (!file) return;
    
    try {
        // Upload da imagem para o Storage
        const storageRef = storage.ref(`profile_images/${currentUser.uid}`);
        await storageRef.put(file);
        const imageUrl = await storageRef.getDownloadURL();
        
        // Atualizar URL da imagem no perfil do usuário
        await db.collection('users').doc(currentUser.uid).update({
            photoURL: imageUrl
        });
        
        // Atualizar imagens na interface
        document.getElementById('profile-image').src = imageUrl;
        document.getElementById('user-avatar').src = imageUrl;
        
        alert('Foto de perfil atualizada com sucesso!');
        
    } catch (error) {
        console.error('Erro ao atualizar foto de perfil:', error);
        alert('Erro ao atualizar foto. Tente novamente.');
    }
});

// Edição de biografia
document.getElementById('edit-bio').addEventListener('click', () => {
    const bioElement = document.getElementById('profile-bio');
    const currentBio = bioElement.textContent;
    
    const newBio = prompt('Editar biografia:', currentBio);
    
    if (newBio !== null) {
        db.collection('users').doc(currentUser.uid).update({
            bio: newBio
        }).then(() => {
            bioElement.textContent = newBio || 'Adicione uma biografia para que as pessoas saibam mais sobre você.';
        }).catch(error => {
            console.error('Erro ao atualizar biografia:', error);
            alert('Erro ao atualizar biografia. Tente novamente.');
        });
    }
});

// Adicionar categoria
document.getElementById('add-category').addEventListener('click', async () => {
    const newCategory = prompt('Adicionar categoria:');
    
    if (!newCategory || newCategory.trim() === '') return;
    
    try {
        const userDoc = await db.collection('users').doc(currentUser.uid).get();
        const userData = userDoc.data();
        
        const categories = userData.categories || [];
        
        // Verificar se já tem esta categoria
        if (categories.includes(newCategory)) {
            alert('Esta categoria já existe no seu perfil.');
            return;
        }
        
        // Adicionar nova categoria
        categories.push(newCategory);
        
        // Atualizar no Firestore
        await db.collection('users').doc(currentUser.uid).update({
            categories: categories
        });
        
        // Atualizar UI
        const categoriesList = document.getElementById('categories-list');
        const categoryTag = document.createElement('span');
        categoryTag.classList.add('category-tag');
        categoryTag.textContent = newCategory;
        categoriesList.appendChild(categoryTag);
        
    } catch (error) {
        console.error('Erro ao adicionar categoria:', error);
        alert('Erro ao adicionar categoria. Tente novamente.');
    }
});
  </script>
</body>
</html>